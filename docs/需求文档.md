
# 需求文档

- [ ] 编写需求文档

## 狼人杀流程

> 每人都只有 15 s 操作, 可提前结束, 死人操作时间随机

每次死人检查是不是警长

1. 设置神职, 设置人数, 设置屠边屠城
2. 发身份, 看身份
3. 第一天
   1. 进入黑夜
   2. **狼人**相认, 杀人
   3. **预言家**睁眼, 验人
   4. **女巫**睁眼
      1. 看谁死了
      2. 可以救自己
      3. 只能用一瓶
   5. **守卫**保人(如果有守卫)
   6. **猎人**看自己是不是还活着
   7. 天亮了
   8. 15s 选择是否上警
   9. 轮流发言
   10. 15s 投票
   11. 宣布昨晚结果, 猎人开枪?
   12. 讨论(都点结束讨论则结束)
   13. 15s 投票
   14. 宣布谁死了
4.  以后每晚上
   15. 进入黑夜
   16. **狼人**相认, 杀人
   17. **预言家**睁眼, 验人
   18. **女巫**睁眼
      1. 如果有**灵药**, 看谁死了
      2. 不能救自己
      3. 只能用一瓶
   19. **守卫**保人(如果有守卫), **不能重复**
   20. **猎人**看自己是不是还活着
   21. 天亮了
   22. 宣布昨晚结果, 猎人开枪?
   23. 讨论(都点结束讨论则结束)
   24. 15s 投票
   25. 宣布谁死了 

## 前端 ##

### 首页

- [ ] 显示 logo 和几个按钮
- [ ] 创建房间, 加入游戏, 查看规则

### 加入房间

- [ ] 输入房间号
- [ ] 输入游戏昵称
- [ ] url 中包含了房间号和密码, 检测自动填充

### 创建房间

- [ ] 设定人数
- [ ] 设定是否要上帝
- [ ] 设定是否需要密码
- [ ] 获得房主 token, 存到 localStorage

### 等待界面

- [ ] 等待玩家加入
- [ ] 房主可 t 人, 房主有分享二维码
- [ ] 显示所有人头像

### 游戏内

- [ ] 显示所有人头像和存活状态, 长按查看死因
- [ ] 用 websocket 接受信息
- [ ] ui 分白天黑夜(直接 hue rotate?), 显示天数
- [ ] 显示自己能进行的操作
  - 狼人投票
    - 显示狼队友
  - 守卫保人
    - 不能重复保
  - 预言家验人
  - 女巫用药
    - [ ]
  - 猎人看状态
  - 村民投票
  - 参与警长竞选
    - 上警
    - 退水
  - 狼人自爆
    - 发送通知
- [ ] 显示事件时间表?
- [ ] 备忘录(速记谁有嫌疑)

### 结束页

- [ ] 显示具体事件表
- [ ] 显示身份

### http

- [ ] 编写 api 文档

## 后端 ##

- [ ] 设计模型
- [ ] 设计鉴权机制
- [ ] 拆分逻辑(设计模式)
